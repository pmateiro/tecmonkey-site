<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TecMonkey ‚Äî Cogni√ß√£o Computacional & Agentes Conversacionais</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg: #0b0f1a;
      --panel: #101a2a;
      --text:#e9eefc;
      --muted:#b7c3df;
      --brand:#4da3ff;
      --shadow: 0 16px 40px rgba(0,0,0,.45);
      --border: rgba(255,255,255,.06);
      --radius: 16px;
    }

    *{ box-sizing:border-box; }
    html{ scroll-behavior:smooth; }
    body{
      margin:0;
      font-family:'Poppins', sans-serif;
      background: var(--bg);
      color:var(--text);
      line-height:1.6;
      overflow-x:hidden;
    }

    .container{ width:min(1100px, 92%); margin:0 auto; }
    a{ color:inherit; text-decoration:none; }

    /* Top bar */
    .topbar{
      position:fixed; inset:0 0 auto 0; z-index:50;
      background: rgba(11,15,26,.75); backdrop-filter: blur(10px);
      border-bottom: 1px solid var(--border);
    }
    .topbar .inner{ height:64px; display:flex; align-items:center; justify-content:space-between; }
    .brand{ display:flex; align-items:center; gap:10px; font-weight:600; }
    .logo{ width:30px; height:30px; background: var(--brand); border-radius:8px; }

    /* Hero Section */
    header.hero{
      min-height:80vh; display:flex; align-items:center; padding-top:100px;
      background: radial-gradient(circle at top left, rgba(77,163,255,.15), transparent);
    }
    h1{ font-size: clamp(2rem, 5vw, 3.5rem); line-height: 1.1; margin-bottom: 20px; }
    .subtitle{ color: var(--muted); font-size: 1.2rem; margin-bottom: 30px; max-width: 600px; }

    .btn{
      padding:12px 24px; border-radius:12px; font-weight:600; cursor:pointer;
      transition: all 0.2s; border: 1px solid var(--border); display: inline-flex;
    }
    .btn.primary{ background: var(--brand); color: #000; border: none; }
    .btn.primary:hover{ transform: translateY(-2px); box-shadow: 0 10px 20px rgba(77,163,255,0.2); }

    /* --- CHAT FLUTUANTE --- */
    .chatbox {
      position: fixed;
      bottom: 25px;
      left: 25px; /* Alinhado √† esquerda como solicitado */
      width: 320px;
      z-index: 1000;
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      display: flex;
      flex-direction: column;
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      overflow: hidden;
    }

    /* Vers√£o Minimizada (Bolinha) */
    .chatbox.minimized {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      cursor: pointer;
    }

    .chatbox.minimized .chat-content, 
    .chatbox.minimized .chat-header-full { display: none; }
    
    .chat-icon-min {
      display: none;
      width: 100%; height: 100%;
      align-items: center; justify-content: center;
      font-size: 24px;
    }
    .chatbox.minimized .chat-icon-min { display: flex; }

    /* Cabe√ßalho do Chat Aberto */
    .chat-header-full {
      padding: 15px;
      background: rgba(255,255,255,0.03);
      border-bottom: 1px solid var(--border);
      display: flex; justify-content: space-between; align-items: center;
      cursor: pointer;
    }

    .chat-messages {
      height: 280px;
      overflow-y: auto;
      padding: 15px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .msg { padding: 8px 12px; border-radius: 12px; font-size: 0.9rem; max-width: 85%; }
    .msg.user { background: var(--brand); color: #000; align-self: flex-end; }
    .msg.ai { background: rgba(255,255,255,0.08); align-self: flex-start; }

    .chat-form { padding: 15px; border-top: 1px solid var(--border); display: flex; gap: 8px; }
    .chat-input {
      flex: 1; background: rgba(0,0,0,0.2); border: 1px solid var(--border);
      color: #fff; padding: 8px; border-radius: 8px; outline: none;
    }

    .dot { width: 8px; height: 8px; background: #22c55e; border-radius: 50%; display: inline-block; margin-right: 5px; }

    @media (max-width: 480px) {
      .chatbox { width: calc(100% - 40px); left: 20px; }
    }
  </style>
</head>
<body>

  <div class="topbar">
    <div class="container inner">
      <div class="brand"><div class="logo"></div> TecMonkey</div>
      <a href="#contato" class="btn">Falar Conosco</a>
    </div>
  </div>

  <header class="hero">
    <div class="container">
      <h1>Intelig√™ncia Artificial que escala o seu neg√≥cio.</h1>
      <p class="subtitle">Criamos agentes conversacionais e automa√ß√µes inteligentes com foco em performance e seguran√ßa.</p>
      <div style="display: flex; gap: 15px;">
        <a href="#solucoes" class="btn primary">Nossas Solu√ß√µes</a>
      </div>
    </div>
  </header>

  <div id="floating-chat" class="chatbox minimized">
    <div class="chat-icon-min" onclick="toggleChat()">üí¨</div>

    <div class="chat-header-full" onclick="toggleChat()">
      <div style="font-weight: 600; font-size: 0.85rem;"><span class="dot"></span> TecMonkey IA</div>
      <div style="cursor:pointer; opacity: 0.5;">‚àí</div>
    </div>

    <div class="chat-content">
      <div id="chat-messages" class="chat-messages">
        <div class="msg ai">Ol√°! Como posso ajudar voc√™ hoje?</div>
      </div>

      <form id="chat-form" class="chat-form">
        <input id="chat-input" class="chat-input" type="text" placeholder="Escreva aqui..." autocomplete="off" required>
        <button type="submit" class="btn primary" style="padding: 8px 12px;">></button>
      </form>
    </div>
  </div>

  <script>
    const ENDPOINT = "https://bobcrock.pmateiro.workers.dev/";
    const chatContainer = document.getElementById('floating-chat');
    const chatMessages = document.getElementById('chat-messages');
    const chatForm = document.getElementById('chat-form');
    const chatInput = document.getElementById('chat-input');

    // Fun√ß√£o para abrir e fechar o chat
    function toggleChat() {
      chatContainer.classList.toggle('minimized');
      if (!chatContainer.classList.contains('minimized')) {
        setTimeout(() => chatInput.focus(), 300);
      }
    }

    // Adicionar mensagens na tela
    function addMessage(role, text) {
      const div = document.createElement('div');
      div.className = `msg ${role}`;
      div.textContent = text;
      chatMessages.appendChild(div);
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    // Enviar mensagem para o Worker
    chatForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      const prompt = chatInput.value.trim();
      if (!prompt) return;

      addMessage('user', prompt);
      chatInput.value = '';

      try {
        const response = await fetch(`${ENDPOINT}?prompt=${encodeURIComponent(prompt)}`);
        
        if (!response.ok) throw new Error();

        const data = await response.json();
        // Tenta pegar a resposta em diferentes formatos poss√≠veis do JSON
        const aiReply = data.response || data.output || data.result || "Desculpe, n√£o consegui processar.";
        
        addMessage('ai', aiReply);
      } catch (err) {
        addMessage('ai', "‚ö†Ô∏è Erro de conex√£o com o servidor.");
      }
    });
  </script>

</body>
</html>